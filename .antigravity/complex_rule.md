<MEMORY[user_global]>
全局行为准则
语言规范
除非用户明确要求其他语言，否则所有解释性文本、报告、分析均应使用简体中文 (Simplified Chinese)。

代码中的变量命名、日志信息保持英文。

Fabric Workflow 专用规则
当用户触发 fabric 或者 fabric_search 工作流时，必须严格遵守"读写分离"原则。

严禁在没有创建 fabric_process_log.md 的情况下结束 Fabric 任务

MCP 调用规范
当任务涉及业界对比、最新技术调研、工具选型时，优先使用 Tavily MCP 进行网络搜索。

搜索结果必须标注来源（URL + 发布时间），不得仅基于推理。

网络搜索工具自动选择：
当任务需要网络搜索时，Agent 应根据以下规则自动选择合适的工具：

优先使用 Tavily MCP 的场景：
- 快速信息检索（关键词："搜索"、"查找"、"调研"）
- 业界对比分析（关键词："对比"、"分析"、"趋势"）
- 学术研究查找（关键词："论文"、"arxiv"、"研究"）
- 批量数据收集（关键词："收集"、"汇总"、"列出"）
- 技术文档查询（关键词："文档"、"教程"、"指南"）
- 需要标注来源和时间的场景
- 默认搜索场景（无特殊要求）

优先使用 Puppeteer MCP 的场景：
- 需要截图或可视化（关键词："截图"、"保存页面"、"可视化"）
- 页面交互操作（关键词："点击"、"填写"、"登录"、"提交"）
- 动态内容提取（JavaScript 渲染的 SPA 应用）
- 网站监控和测试（关键词："监控"、"检测变化"、"定期检查"）
- 用户明确要求"访问网页"、"打开网站"
- Tavily 无法满足需求时的备选方案

组合使用策略：
- 复杂任务可先用 Tavily 快速概览，再用 Puppeteer 深度提取
- 竞品分析：Tavily 查找列表 + Puppeteer 截图监控
- 技术调研：Tavily 收集资源 + Puppeteer 提取详细内容

Puppeteer 搜索规范
当使用 Puppeteer 进行网络搜索时：
- 默认使用 DuckDuckGo 搜索引擎（https://duckduckgo.com/）
- 搜索 URL 格式：https://duckduckgo.com/?q={关键词}
- 优先使用 DuckDuckGo 的原因：页面结构简单、选择器稳定、易于提取结果
- 仅在用户明确要求时使用 Google、Bing 等其他搜索引擎

Puppeteer 结果提取规范
提取搜索结果时使用以下标准选择器：
- 结果容器：article[data-testid="result"]
- 标题链接：a[data-testid="result-title-a"] 或 h2 a
- 描述文本：span[data-result="snippet"]
- 每次提取前 10 个结果

文档创建规范
创建技术分析报告时，必须包含以下章节：
- 执行摘要
- 核心维度分析
- 业界对比（如适用）
- 改进建议（短期/中期/长期）
- 参考文献列表

代码审查规范
审查代码时，必须关注以下维度：
- 代码可读性（命名、注释、结构）
- 性能优化点（算法复杂度、资源占用）
- 潜在 Bug（边界条件、异常处理）
- 最佳实践（设计模式、工程规范）
</MEMORY[user_global]>
